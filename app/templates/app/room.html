{% extends 'app/base.html' %}
{% load i18n %}
{% load static %}

{% block content %}

{% if user.is_staff %}
<div class="text-center mt-5 mb-3">
  <p>
    {% trans "このボタンは各ハウスの管理者にのみ見えています" %}
  </p>
</div>
<form action="{% url 'app:assign_chore' %}" method="POST">{% csrf_token %}
  <button type="submit" class="btn w-100 mb-2">
    {% trans "今週の家事を割り振る" %}
  </button>
</form>
<form action="{% url 'app:reset_common_fee' %}" method="POST">{% csrf_token %}
  <button type="submit" class="btn w-100 mb-2">
    {% trans "共益費を再度表示する" %}
  </button>
</form>
<hr>
{% endif %}
<div class="row mt-3">
  <form class="col-11 mx-auto" action="{% url 'app:finish_task' %}" method="POST">{% csrf_token %}
    <p><b>
      {% trans "今週" %}
      {{ user.name }}
      {% trans "さんが担当する家事" %}
    </b></p><br>
    <p style="font-size:smaller;">
      {% trans "終わったらチェックを入れて" %}
      <br>
      {% trans "送信ボタンを押してください" %}
    </p>
    {% if user.done_weekly == False %}
    <div class="d-flex">
      <input type="checkbox" class="mt-1" name="task" value="weekly">
      <h5 class="pl-1">{{ user.housechore_title }}</h5>
    </div>
      <p class="pl-3 pt-1">{{ user.housechore_desc }}</p>
    {% endif %}
    <br>
    {% if user.done_monthly == False %}
    <div class="d-flex">
      <input type="checkbox" class="mt-1" name="task" value="monthly">
      <p class="pl-1" style="font-size:smaller;">
      {% trans "公共費" %}
      {{ user.house_common_fee }}
      {% trans "円 / 毎月" %}
      {{ user.house_common_fee_date }}
      {% trans "日" %}
      </p>
    </div>
    {% endif %}
    <button type="submit" class="btn w-100 mb-2">
      {% trans "送信" %}
    </button>
  </form>
</div>
<hr>
<div class="pt-1">
  <p class="link" data-toggle="modal" data-target="#exampleModal_username" data-whatever="@mdo">
    {% trans "ユーザー名を設定する" %}
  </p>
  <a href="{% url 'users:request_ch_house' %}">
    {% trans "ハウスを間違えましたか？" %}
  </a>
</div>
<div class="py-3">
  <a class="pr-1" href="{% url 'users:logout' %}">
    {% trans "ログアウト" %}
  </a>
  {% if user.is_staff %}
  <a href="/admin/" target="_blank" rel="noopener noreferrer">
    {% trans "ハウス管理" %}
  </a>
  {% else %}
  <a href="{% url 'app:request_house_owner' %}">
    {% trans "ハウス管理者権限の申請" %}
  </a>
  {% endif %}
</div>

<div class="modal fade" id="exampleModal_username" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <p class="modal-title" id="exampleModalLabel_username">
          {% trans "表示させたいユーザー名を入力してください" %}
        </p>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="{% url 'app:set_username' %}" method="GET">
          <div class="form-group">
            <input type="text" class="w-100 py-2" name="name" placeholder="ユーザー名">
          </div>
          <div class="d-flex pt-2">
            <button type="button" class="btn w-50 mr-1" data-dismiss="modal">
              {% trans "キャンセル" %}
            </button>
            <button type="submit" class="btn w-50 ml-1">
              {% trans "設定" %}
            </button>
          </div>
        </form>
      </div>

  </div>
</div>
{% endblock %}
